<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mongo db</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 22px;
            text-align: justify;
        }

        #main {
            margin: auto;
            width: 80%;
        }

        body {
            margin: 0;
        }


        .ex {
            background-color: rgb(246 240 251);
            box-shadow: 0 0 10px 2px black;
            padding: 10px;
        }

        .border {
            border: 1px solid;
            padding: inherit;
        }

        #myid {
            /* width: 1000px; */
            background-color: black;
            overflow-x: scroll;
            /* -ms-overflow-style: none;  IE and Edge */
            scrollbar-width: none;
            white-space: nowrap;
        }

        #myid li {
            color: aliceblue;

            display: inline-block;
            list-style-type: none;
            padding: 5px;
        }

        #myid li a {
            text-decoration: none;
            padding: 5px;
        }

        #myid li :hover {
            background-color: blueviolet;
        }

        #myid li :active {
            color: rgb(47, 0, 255);
        }

        #myid li :focus {
            color: rgb(0, 255, 30);
        }

        #myid li a:target {
            color: red;
        }

        :target {
            color: red;
        }

        @media screen and (max-width: 600px) {
            * {
                font-size: 15px;
                word-wrap: break-word;
            }

            img {
                width: 100%;
            }

            #main {
                width: 100%;
            }

            h1,
            h2,
            h3 {
                text-align: center;
            }
        }
    </style>
</head>

<body>
    <div id="main">
        <h1>MONGODB</h1>
        <div class="ex">
            <p class="border">
                MongoDB is a non-relational document database that provides support for JSON-like storage. The MongoDB
                database has a flexible data model that enables you to store unstructured data, and it provides full
                indexing support, and replication with rich and intuitive APIs. <br> <br>
                MongoDB is a source-available, cross-platform, document-oriented database program. Classified as a NoSQL
                database product, MongoDB utilizes JSON-like documents with optional schemas. MongoDB is developed by
                MongoDB Inc. and current versions are licensed under the Server Side Public License.
            </p>
            <p class="border">
                <b><u>MongoDB Document</u></b> <br>
                Records in a MongoDB database are called documents, and the field values may include numbers, strings,
                booleans, arrays, or even nested documents. <br>
                { <br>
                &nbsp;&nbsp; title: "Post Title 1", <br>
                &nbsp;&nbsp; body: "Body of post.", <br>
                &nbsp;&nbsp; category: "News", <br>
                &nbsp;&nbsp; likes: 1, <br>
                &nbsp;&nbsp; tags: ["news", "events"], <br>
                &nbsp;&nbsp; date: Date() <br>
                } <br>
            </p>
            <p>
                In a simple word mongo db is NOSQL database <br>
                The data store in collection. <br>
                Collection don't have rows and columns. <br>
                Data store in a form of object. <br>
            </p>
            <h2>SQL vs Document Databases</h2>
            <p class="border">

                SQL databases are considered relational databases. They store related data in separate tables. When data
                is needed, it is queried from multiple tables to join the data back together. <br><br>

                MongoDB is a document database which is often referred to as a non-relational database. This does not
                mean that relational data cannot be stored in document databases. It means that relational data is
                stored differently. A better way to refer to it is as a non-tabular database. <br><br>

                MongoDB stores data in flexible documents. Instead of having multiple tables you can simply keep all of
                your related data together. This makes reading your data very fast.<br><br>

                You can still have multiple groups of data too. In MongoDB, instead of tables these are called
                collections.
            </p>
            <h3>Download and install mongoDb</h3>
            <p class="border">
                1. Download mongoDB <br>
                2. Install <br>
                3. "C:\Program Files\MongoDB\Server\5.0\bin\mongod.exe" --version <br>
                4. "C:\Program Files\MongoDB\Server\5.0\bin\mongos.exe" --version <br>
                4. "C:\Program Files\MongoDB\Server\5.0\bin\mongod.exe" <br>
            </p>

            <h3>MongoDb shell commond :</h3>
            <p class="border">
                &bull; show dbs (Show all database) <br>
                &bull; use newDBName :- Create database <br>
                &bull; db.dropDatabase() :- Delete current database<br>
            </p>
            <p class="border">
                &bull; show collections :- Show all collection in a database. <br>
                &bull; db.createCollection("collectionName") :- Create collection in a database. <br>
                &bull; db.collectionName.drop() :- Delete collection in a database.<br>
            </p>
            <h3>CRUD operation in mongoDB</h3>
            <p class="border">
                1. Create database : use e-comm :- Switch database <br>
                2. Create collection : bd.createCollection("product") <br>
                <br>
                create :- db.product.insertOne({name : "2a", brand : "Nothing", price : 250}) <br><br>
                Read :- db.product.find() <br> <br>
                Update :- db.product.updateOne({name : "2a"}, {$set : {brand :"Samsang galaxy"}})
                <br><br>
                Delete :- db.product.deleteOne({brand : "Apple"})
            </p>
            <h3>connect node with mongoDB</h3>
            <p class="border">
                1. install mongoDB package. <br>
                2. Connect mongoDB with nodejs <br>
                3. Show data from mongoDB <br><br>

                npm i mongodb <br> <br>
                const {mongoClient} = require("mongodb") <br>
                // const mongoClient = require("mongodb").mongoClient <br><br>
                const url = "mongodb://localhost:27017"; <br> <br>
                const client = new mongoClient(url) <br> <br>
                const batabase = "e-comm" <br> <br>
                async function getData(){ <br>
                &nbsp;&nbsp; let result = await client.connect() <br>
                &nbsp;&nbsp; let db = result.db(batabase) <br>
                &nbsp;&nbsp; let collection = db.collection("product"); <br>
                &nbsp;&nbsp;// console.log(collecion.find({}).toArray()) <br><br>
                &nbsp;&nbsp; let resp = await collection.find({}).toArray() <br>
                &nbsp;&nbsp; console.log(resp); <br>
                } <br>
                getData();
            </p>
            <h3>Read data from mongodb</h3>
            <p>
                1. Read data from mongodb <br>
                2. Make file for db Connection <br>
                3. Handle Promise. <br>
            </p>
            <p class="border">
                <u>dbConnection.js </u><br>
                const {MongoClient} = require("mongodb") <br> <br>
                const client = new MongoClient("mongodb://localhost:27017") <br> <br>
                async function dbConnect(){ <br>
                &nbsp;&nbsp; let result = await client.connect() <br>
                &nbsp;&nbsp; let db = result.db("e-comm") <br>
                &nbsp;&nbsp; return db.collection("product"); <br>
                } <br>
                module.exports = dbConnect;<br><br>

                <u>dbConnection1.js </u><br>
                <!--  old way -->
                // old way <br /><br />
                const dbConnect = require("./dbConnection") <br>

                dbConnect().then((resp)=>{ <br>
                resp.find().toArray().then((data)=>{ <br>
                console.log("data :-",data) <br>
                }) <br>
                }) <br><br>

                // Modern way <br /><br />
                <!-- Modern way -->
                const main = async ()=>{ <br>
                let data = await dbConnect(); <br>
                data = await data.find().toArray(); <br>
                console.log("data :-", data) <br>
                } <br>
                main(); <br><br>
            </p>

        </div>
        <div class="ex">
            <h3>INSERT DATA FROM MONGODB</h3>
            <p class="border">
                <u> dbConnection.js</u> <br>
                const {MongoClient} = require("mongodb") <br> <br>
                const client = new MongoClient("mongodb://localhost:27017") <br> <br>
                async function dbConnect(){ <br>
                &nbsp;&nbsp; let result = await client.connect() <br>
                &nbsp;&nbsp; let db = result.db("e-comm") <br>
                &nbsp;&nbsp; return db.collection("product"); <br>
                } <br>
                module.exports = dbConnect;
            </p>
            <p class="border">
                <u> insertData.js</u> <br>
                const dbConnect = require("./dbConnection") <br> <br>
                const insertData = async () => { <br>
                &nbsp;&nbsp; let data = await dbConnect() <br>
                &nbsp;&nbsp; data = data.insert([<br>
                &nbsp;&nbsp;&nbsp;&nbsp; {name:"max-1", brand : "moto",price :"15999"},<br>
                &nbsp;&nbsp;&nbsp;&nbsp; {name:"max-2", brand : "micromax",price :"11999"},<br>
                &nbsp;&nbsp;&nbsp;&nbsp; {name:"max-3", brand : "Samsang",price :"50999"},<br>
                &nbsp;&nbsp; ]) <br> <br>
                if (data.acknowledged) { <br>
                console.log(data) <br>
                } <br>

                } <br>
                insertData();
            </p>
            <p class="border">
                <u> readData.js</u> <br>
                const dbConnect = require("./dbConnection") <br> <br>
                const readData = async () => { <br>
                &nbsp;&nbsp; let data = await dbConnect() <br>
                &nbsp;&nbsp; data = await data.find({}).toArray() <br>
                &nbsp;&nbsp; console.log(data) <br>
                } <br>
                readData();
            </p>
            <p class="border">
                <u> updateData.js</u> <br>
                const dbConnect = require("./dbConnection") <br> <br>
                const updateData = async () => { <br>
                &nbsp;&nbsp; let data = await dbConnect() <br>
                &nbsp;&nbsp; data = await data.updateMany( <br>
                &nbsp;&nbsp;&nbsp;&nbsp; {name : "max-1"},{$set :{name: "max-10", brand: "Samsang galaxy", price:
                "59999" }} <br>
                &nbsp;&nbsp; ) <br>
                &nbsp;&nbsp; if (data.acknowledged) { <br>
                &nbsp;&nbsp; &nbsp;&nbsp; console.log(data) <br>
                &nbsp;&nbsp; } <br>
                } <br>
                updateData();
            </p>
            <p class="border">
                <u> deleteData.js</u> <br>
                const dbConnect = require("./dbConnection") <br> <br>
                const deleteData = async () => { <br>
                &nbsp;&nbsp; let data = await dbConnect() <br>
                &nbsp;&nbsp; data = await data.deleteOne({name : "max-10"}) <br>
                &nbsp;&nbsp; if (data.acknowledged) { <br>
                &nbsp;&nbsp; &nbsp;&nbsp; console.log(data) <br>
                &nbsp;&nbsp; } <br>
                } <br>
                deleteData();
            </p>
            <p class="border">
                CRUD query in mongodb <br>
                1. dbConnect.find({}).toArray() <br>
                2. dbConnect.insertOne({name:"redmi",model : "2024"}) //insertMany <br>
                3. dbConnect.updateOne({name : "max-1"},{$set : {name: "max-10",price:"11999"}}) //updateMany<br>
                4. dbConnect.deleteOne({name : "max-1"}) // deleteMany<br>
            </p>
        </div>
        <h3>API with mongodb</h3>
        <div class="ex">
            <u>Nodejs get api method</u> <br><br>
            <u>mongoConnect.js</u> <br>
            <p class="border">
                const {MongoClient} = require("mongodb") <br>
                const client = new MongoClient(url) <br><br>
                const dbConnect = () =>{ <br>
                &nbsp;&nbsp; client.connect();<br>
                &nbsp;&nbsp; let db = client.db("databaseName"); // like : e-comm <br>
                &nbsp;&nbsp; let collection = db.collection("collectionName") // like : product <br>
                &nbsp;&nbsp; return collection; <br>
                } <br><br>
                module.exports = dbConnect;

            </p>
            <u>index.js</u> <br>
            <p>Get Api method :- Get data from mongodb. </p>
            <p class="border">
                const express = require("express") <br>
                const dbConnect = require("./mongoConnect") <br>
                const app = express();<br><br>
                app.get("/" async (req,resp)=>{ <br>
                &nbsp;&nbsp; let data = await dbConnect(); <br>
                &nbsp;&nbsp; data = await data.find({}).toArray(); <br>
                &nbsp;&nbsp; resp.send(data); <br>
                }) <br><br>
                app.listen(8080)
            </p>
            <p>Post Api method </p>
            <p>
                Make post Api method <br>
                send data from postman <br>
                get data in nodejs by req object <br>
                write code for insert data in mongodb.
            </p>
            <p class="border">
                const express = require("express") <br>
                const dbConnect = require("./mongoConnect") <br>
                const app = express();<br><br>
                app.use(express.json()) // body parser (middleware) <br>

                app.post("/", async (req,resp)=>{ <br>
                &nbsp;&nbsp; let data = await dbConnect(); <br>
                &nbsp;&nbsp; data = await data.insertOne(req.body); <br>
                &nbsp;&nbsp; resp.send(data); <br>
                }) <br><br>
                app.listen(8080)
            </p>
            <p>Get put method</p>
            <p>
                Make put method for api. <br>
                Send data from postman. <br>
                Handle data in nodejs by request object. <br>
                Write code for update data in mongodb.
            </p>
            <p class="border">
                const express = require("express") <br>
                const mongodb = require("mongodb"); <br>
                const dbConnect = require("./mongoConnect") <br>
                const app = express();<br><br>
                app.use(express.json()) // body parser (middleware) <br>

                app.put("/:id", async (req,resp)=>{ <br>
                &nbsp;&nbsp; let data = await dbConnect(); <br>
                &nbsp;&nbsp; data = await data.updateOne({name:req.params.id},{$set:req.body}); <br>
                &nbsp;&nbsp; data = await data.updateOne({_id : new mongodb.ObjectId(req.params.pid)},{$set
                :req.body});<br>
                &nbsp;&nbsp; resp.send(data); <br>
                }) <br><br>
                app.listen(8080)
            </p>
            <p>Get delete method</p>
            <p>
                Make detele method for api. <br>
                send data from postman. <br>
                Handle data in nodejs by request object. <br>
                Write code for update data in mongodb.
            </p>
            <p class="border">
                const express = require("express") <br>
                const mongodb = require("mongodb"); <br>
                const dbConnect = require("./mongoConnect") <br>
                const app = express();<br><br>

                app.delete("/:id", async (req,resp)=>{ <br>
                &nbsp;&nbsp; let data = await dbConnect(); <br>

                &nbsp;&nbsp; data = await data.deleteOne({_id : new mongodb.ObjectId(req.params.pid)}) <br>
                resp.send(data); <br>
                }) <br>
                app.listen(8080)
            </p>

        </div>

    </div>
</body>

</html>